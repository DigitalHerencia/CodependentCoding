# GitHub Copilot Instructions for CodependentCoding

## Project Architecture: Specification-Driven Development (SDD)

This is a **Specification-Driven Development** codebase where specifications generate code, not the reverse. The workflow is: `/specify` → `/plan` → `/tasks` → implementation.

### Key Directories
- `specs/[###-feature-name]/` - Feature specifications, plans, and tasks (generated by SDD commands)
- `.specify/` - SDD tooling (PowerShell scripts, templates, constitution)
- `.github/prompts/` - AI agent prompt instructions for each SDD phase
- `.vscode/` - Custom icon theme and workspace settings

## Critical Workflows

### SDD Command Sequence
1. **Feature Creation**: Follow `.github/prompts/specify.prompt.md` instructions
   - Run `.specify/scripts/powershell/create-new-feature.ps1` with feature description
   - Generates `specs/###-feature-name/spec.md` on new branch
2. **Implementation Planning**: Follow `.github/prompts/plan.prompt.md`  
   - Generates `plan.md`, `data-model.md`, `contracts/`, `research.md`, `quickstart.md`
3. **Task Generation**: Follow `.github/prompts/tasks.prompt.md`
   - Generates TDD-ordered `tasks.md` with parallel execution groups marked [P]

### Agent Context Updates
The `.specify/scripts/powershell/update-agent-context.ps1` script maintains agent instruction files:
- Extracts tech stack from `plan.md` files automatically
- Updates agent context files (CLAUDE.md, GEMINI.md, .github/copilot-instructions.md)
- Preserves manual additions between `<!-- MANUAL ADDITIONS START/END -->` markers

## Project-Specific Patterns

### Current Feature: ChatGPT Archive Utility (MVP)
- **Stack**: Next.js App Router + React 19 + TypeScript 5 + Prisma + Neon + Clerk + Tailwind v4
- **Architecture**: Server-first with RSC, Server Actions under `lib/actions/`, minimal client components
- **Testing**: TDD-first with contract → integration → unit test ordering

### File Organization (Per PRD.md)
```
lib/actions/          # Server Actions with 'use server' + Zod schemas  
components/           # Pure UI components (stateless)
features/             # Business logic + UI combinations
prisma/               # Schema + migrations (use DATABASE_URL_UNPOOLED)
tests/                # Contract tests before implementation
```

### Security Requirements
- **Webhook Verification**: Timing-safe HMAC comparison for Clerk webhooks
- **Input Validation**: All Server Actions use Zod schemas
- **Environment**: Never commit .env files; use Vercel secrets

## Development Commands
```bash
# SDD Workflow
.specify/scripts/powershell/create-new-feature.ps1 -Json "feature description"
.specify/scripts/powershell/setup-plan.ps1 -Json "implementation details" 
.specify/scripts/powershell/check-task-prerequisites.ps1 -Json "context"

# Next.js + Prisma
npm run dev                    # Start development server
npx prisma db push            # Push schema (uses DATABASE_URL_UNPOOLED)
npx prisma generate           # Generate Prisma client
npx tailwindcss init -p       # Initialize Tailwind config
```

## Constitutional Principles
The project follows architectural principles defined in `.specify/memory/constitution.md`:
- **Library-First**: Features start as standalone libraries
- **CLI Interface**: All functionality accessible via CLI
- **Test-First**: Mandatory TDD (RED-GREEN-Refactor)
- **Integration Testing**: Real environments over mocks

## AI Agent Integration
- This codebase is optimized for AI agents with explicit export names and clear function signatures
- Task files (`specs/*/tasks.md`) are LLM-executable with specific acceptance criteria
- Agent context files auto-update from feature plans to stay current with tech stack changes

## Recent Changes
- Implemented SDD methodology with three-command workflow (`/specify`, `/plan`, `/tasks`)
- Added ChatGPT Archive Utility MVP specification and implementation plan
- Created custom VS Code icon theme for project-specific files (specs, Next.js, Prisma)